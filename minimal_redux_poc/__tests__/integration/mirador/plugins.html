<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="theme-color" content="#000000">
    <title>Mirador</title>
  </head>
  <body>
    <div id="mirador"></div>
    <script crossorigin src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    <script>document.write("<script type='text/javascript' src='../../../dist/mirador.min.js?v=" + Date.now() + "'><\/script>");</script>
    <script type="text/javascript">
      class MiradorShareButton extends React.Component {
        constructor(props) {
          super(props);
      
          this.handleClick = this.handleClick.bind(this);
        }
        handleClick() {
          alert('Share this stuff')
        }
        render() {
          return React.createElement('button', { className: 'share', onClick: this.handleClick}, 'Share');
        }
      }
      miradorShareButton = {
        name: 'miradorShareButton',
        component: MiradorShareButton,
        parent: 'WindowTopBarButtons',
      }
      Mirador.plugins.miradorTopBarShare = miradorShareButton;
      class MiradorRuler extends React.Component {
        constructor(props) {
          super(props);
          this.state = {
            zooming: false,
          }
          this.zoomToColor = this.zoomToColor.bind(this);
        }
        componentDidMount() {
          this.props.pluginParent().viewer.addHandler('zoom', (e) => {
            this.setState({
              zooming: true
            })
          })
          const that = this;
          // Super hacky don't do this for real
          function resetStyle() {
            that.setState({
              zooming: false
            })
            setTimeout(resetStyle, 750)
          }
          resetStyle();
        }
        zoomToColor(zooming) {
          if (zooming) {
            return 'red'
          }
          return 'black'
        }
        render() {
          return React.createElement('div', {className: 'mirador-ruler', style: {position: 'absolute', color: this.zoomToColor(this.state.zooming)}}, 'I am a ruler')
        }
      }
      miradorRuler = {
        name: 'miradorRuler',
        component: MiradorRuler,
        parent: 'WindowViewer',
      }
      Mirador.plugins.miradorRuler = miradorRuler;
    </script>
    <script type="text/javascript">
      var miradorInstance = Mirador.viewer({
        id: 'mirador',
        plugins: ['miradorShareButton']
      });
    </script>
  </body>
</html>
